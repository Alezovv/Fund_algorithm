# === –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏ —Ñ–ª–∞–≥–∏ ===
CC = gcc
CFLAGS = -std=c99 -Wall -Wextra -Werror -Iinclude

# === –ü–∞–ø–∫–∏ ===
SRC_DIR = src
BIN_DIR = bin

# === –§–∞–π–ª—ã ===
SRC = $(wildcard $(SRC_DIR)/*.c)
TARGET = $(BIN_DIR)/justify

# === –ü—Ä–∞–≤–∏–ª–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ===
all: dirs $(TARGET)

# === –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –ª–∏–Ω–∫–æ–≤–∫–∞ ===
$(TARGET): $(SRC)
	@echo "üîß Building..."
	$(CC) $(CFLAGS) $(SRC) -o $(TARGET)
	@echo "‚úÖ Build complete: $(TARGET)"

# === –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π ===
dirs:
	mkdir -p $(BIN_DIR)

# === –û—á–∏—Å—Ç–∫–∞ ===
clean:
	@echo "üßπ Cleaning..."
	rm -rf $(BIN_DIR) output.txt

# === –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ ===
re: clean all

# === –£–¥–æ–±–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã ===
run: all
	@echo "üöÄ Running..."
	@./$(TARGET)

# === –¢–µ—Å—Ç —Å input.txt ===
test: all
	@echo "=== Running test ==="
	@./$(TARGET) < input.txt > output.txt
	@echo "‚úÖ Done. Check output.txt"

.PHONY: all clean re run test dirs
